<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utils &mdash; py4dlib 0.6.5 documentation</title>
    
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="py4dlib 0.6.5 documentation" href="../index.html" />
    <link rel="up" title="API docs" href="../api.html" />
    <link rel="next" title="Examples" href="../examples.html" />
    <link rel="prev" title="Plugins" href="plugins.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../examples.html" title="Examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plugins.html" title="Plugins"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">py4dlib 0.6.5 documentation</a> &raquo;</li>
          <li><a href="../api.html" accesskey="U">API docs</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="utils">
<h1>Utils<a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h1>
<p>Utility toolbelt for great convenience.</p>
<dl class="function">
<dt id="ClearConsole">
<tt class="descname">ClearConsole</tt><big>(</big><big>)</big><a class="headerlink" href="#ClearConsole" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the console across multiple CINEMA 4D versions.</p>
</dd></dl>

<dl class="function">
<dt id="FuzzyCompareStrings">
<tt class="descname">FuzzyCompareStrings</tt><big>(</big><em>a</em>, <em>b</em>, <em>limit=20</em><big>)</big><a class="headerlink" href="#FuzzyCompareStrings" title="Permalink to this definition">¶</a></dt>
<dd><p>Fuzzy string comparison.</p>
<p>Two strings are deemed equal if they have
the same byte sequence for up to &#8216;limit&#8217; chars.</p>
<p>Limit can be an int or a percentage string
like for example <tt class="docutils literal"><span class="pre">60%</span></tt> in which case 2 strings
are deemed equal if at least <tt class="docutils literal"><span class="pre">60%</span></tt> relative to
the longest string match.</p>
</dd></dl>

<dl class="function">
<dt id="EscapeUnicode">
<tt class="descname">EscapeUnicode</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#EscapeUnicode" title="Permalink to this definition">¶</a></dt>
<dd><p>CINEMA 4D R12&#8217;s CPython integration stores high-order chars (<tt class="docutils literal"><span class="pre">ord</span> <span class="pre">&gt;</span> <span class="pre">126</span></tt>)
as 4-byte unicode escape sequences with upper case hex letters.</p>
<p>For example the character <tt class="docutils literal"><span class="pre">ä</span></tt> (<em>LATIN SMALL LETTER A WITH DIAERESIS</em>)
would be stored as the byte sequence <tt class="docutils literal"><span class="pre">\u00E4</span></tt>. This function replaces
high-order chars with a unicode escape sequence suitable for CINEMA 4D R12.</p>
<p>If you use this function in R12 you probably need to balance each call with a
call to <a class="reference internal" href="#UnescapeUnicode" title="UnescapeUnicode"><tt class="xref py py-func docutils literal"><span class="pre">UnescapeUnicode()</span></tt></a> when the time comes to use, display or
compare your string to a string returned by some internal function of C4D R12.</p>
<p>For example, if you ask an object named <tt class="docutils literal"><span class="pre">Würfel</span></tt> (German for cube)
for its name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">opname</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>

<span class="c"># opname now prints as &quot;W\ürfel&quot; but is actually &quot;W\u00FCrfel&quot;</span>
<span class="c"># if you UnescapeUnicode now you will get a Python byte string</span>
<span class="c"># with proper encoding</span>

<span class="n">opname_unescaped</span> <span class="o">=</span> <span class="n">UnescapeUnicode</span><span class="p">(</span><span class="n">opname</span><span class="p">)</span>

<span class="c"># opname_unescaped is now &quot;W\xfcrfel&quot; (latin-1) and you can compare</span>
<span class="c"># it to other Python byte strings with no additional fuzz. If you want</span>
<span class="c"># to change the byte string and then pass it to C4D to set an object&#39;s</span>
<span class="c"># new name you would have to escape the byte string to get a string</span>
<span class="c"># that uses an escape sequence similar to the one shown at the beginning</span>

<span class="n">new_opname_escaped</span> <span class="o">=</span> <span class="n">EscapeUnicode</span><span class="p">(</span><span class="n">opname_unescaped</span><span class="p">)</span>

<span class="n">op</span><span class="o">.</span><span class="n">SetName</span><span class="p">(</span><span class="n">new_opname_escaped</span><span class="p">)</span>

<span class="c"># Remember this is only relevant for R12. In R13 and R14 both functions</span>
<span class="c"># are practically no-ops.</span>
</pre></div>
</div>
<p>In R13 and R14 it returns the string untouched since in those versions
the CPython intergration handles Unicode encoded strings properly.</p>
</dd></dl>

<dl class="function">
<dt id="UnescapeUnicode">
<tt class="descname">UnescapeUnicode</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#UnescapeUnicode" title="Permalink to this definition">¶</a></dt>
<dd><p>CINEMA 4D R12&#8217;s CPython integration stores high-order chars (<tt class="docutils literal"><span class="pre">ord</span> <span class="pre">&gt;</span> <span class="pre">126</span></tt>)
as 4-byte unicode escape sequences with upper case hex letters.</p>
<p>This function converts unicode escape sequences used by CINEMA 4D when passing
bytes (e.g. <tt class="docutils literal"><span class="pre">\u00FC</span></tt> -&gt; <tt class="docutils literal"><span class="pre">\xfc</span></tt>) to their corresponding high-order characters.</p>
<p>It should be used in R12 only and should balance out any calls made to
<a class="reference internal" href="#EscapeUnicode" title="EscapeUnicode"><tt class="xref py py-func docutils literal"><span class="pre">EscapeUnicode()</span></tt></a>.</p>
<p>In R13 and R14 the string is returned untouched since in those versions
the CPython intergration handles Unicode encoded strings properly.</p>
</dd></dl>

<dl class="function">
<dt id="VersionString">
<tt class="descname">VersionString</tt><big>(</big><em>versionTuple</em><big>)</big><a class="headerlink" href="#VersionString" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">(x,y,z,</span> <span class="pre">..</span> <span class="pre">n)</span> <span class="pre">-&gt;</span> <span class="pre">'x.y.z...n'</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="PPLLString">
<tt class="descname">PPLLString</tt><big>(</big><em>ll</em><big>)</big><a class="headerlink" href="#PPLLString" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pretty-printed string of a <tt class="docutils literal"><span class="pre">list&lt;list&gt;</span></tt> structure.</p>
</dd></dl>

<dl class="function">
<dt id="System">
<tt class="descname">System</tt><big>(</big><em>cmd</em>, <em>args=None</em><big>)</big><a class="headerlink" href="#System" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for firing off commands to
the system console. Used instead of <a class="reference external" href="http://docs.python.org/library/subprocess.html?highlight=subprocess.call#subprocess.call">subprocess.call</a>
so that shell variables will be expanded properly.</p>
<p>Not the same as <a class="reference external" href="http://docs.python.org/library/os.html?highlight=os.system#os.system">os.system</a> as here it captures
<tt class="docutils literal"><span class="pre">stdout</span></tt> and <tt class="docutils literal"><span class="pre">stderr</span></tt> in a tuple for Python 2.5
and lower or a <tt class="docutils literal"><span class="pre">namedtuple</span></tt> in 2.6 and higher.
So you can use <tt class="docutils literal"><span class="pre">result[0]</span></tt> in the first case and
<tt class="docutils literal"><span class="pre">result.out</span></tt> in the second.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cmd</strong> (<em>str</em>) &#8211; a console command line string</li>
<li><strong>args</strong> (<em>list</em>) &#8211; a list of arguments that will be
expanded in cmd starting with <tt class="docutils literal"><span class="pre">$0</span></tt></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">tuple</span></tt> or <tt class="docutils literal"><span class="pre">namedtuple</span></tt></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="decorators">
<h1>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="benchmark">
<tt class="descname">benchmark</tt><big>(</big><em>func=None</em>, <em>prec=3</em>, <em>unit='auto'</em>, <em>name_width=0</em>, <em>time_width=8</em><big>)</big><a class="headerlink" href="#benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that prints the time a function takes
to execute per call and cumulative total.</p>
<p>Accepts the following keyword arguments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>unit</strong> (<em>str</em>) &#8211; time unit for display. one of <tt class="docutils literal"><span class="pre">[auto,</span> <span class="pre">us,</span> <span class="pre">ms,</span> <span class="pre">s,</span> <span class="pre">m]</span></tt>.</li>
<li><strong>prec</strong> (<em>int</em>) &#8211; radix point precision.</li>
<li><strong>name_width</strong> (<em>int</em>) &#8211; width of the right-aligned function name field.</li>
<li><strong>time_width</strong> (<em>int</em>) &#8211; width of the right-aligned time value field.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>For convenience you can also set attributes on the benchmark
function itself with the same name as the keyword arguments
and the value of those will be used instead. This saves you
from having to call the decorator with the same arguments each
time you use it. Just set, for example, <tt class="docutils literal"><span class="pre">benchmark.prec</span> <span class="pre">=</span> <span class="pre">5</span></tt>
after the import and before you use it for the first time.</p>
<p>Usage example:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="nd">@benchmark</span>
<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Return factorial of x. &#39;&#39;&#39;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Output:</p>
<div class="code highlight-python"><pre>-&gt; factorial() @ 001: 10.000 us, total: 10.000 us
-&gt; factorial() @ 002: 22.000 us, total: 32.000 us</pre>
</div>
<p>Output for <tt class="docutils literal"><span class="pre">&#64;benchmark(unit='ms',</span> <span class="pre">time_width=6)</span></tt>:</p>
<div class="code highlight-python"><pre>-&gt; factorial() @ 001:  0.009 ms, total:  0.009 ms
-&gt; factorial() @ 002:  0.023 ms, total:  0.032 ms</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="require">
<tt class="descname">require</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#require" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that enforces types for function/method args.</p>
<p>Two ways to specify which types are required for each arg.</p>
<ol class="arabic simple">
<li>2-tuples, where first member specifies arg index or arg name,
second member specifies a type or a tuple of types.</li>
<li>kwargs style, e.g. <tt class="docutils literal"><span class="pre">argname=types</span></tt> where <tt class="docutils literal"><span class="pre">types</span></tt> again can
be a type or a tuple of types.</li>
</ol>
<p>None is always a valid type, to allow for optional args.</p>
<p>Usage example:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="nd">@require</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
   <span class="k">return</span>  <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="deprecated">
<tt class="descname">deprecated</tt><big>(</big><em>level=1</em>, <em>since=None</em>, <em>info=None</em><big>)</big><a class="headerlink" href="#deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used to mark functions as deprecated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>level</strong> (<em>int</em>) &#8211; severity level.
0 = warnings.warn(category=DeprecationWarning)
1 = warnings.warn_explicit(category=DeprecationWarning)
2 = raise DeprecationWarning()</li>
<li><strong>since</strong> (<em>string</em>) &#8211; the version where deprecation was introduced.</li>
<li><strong>info</strong> (<em>string</em>) &#8211; additional info. normally used to refer to the new
function now favored in place of the deprecated one.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cache">
<tt class="descname">cache</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Classic cache decorator.</p>
</dd></dl>

<dl class="function">
<dt id="memoize">
<tt class="descname">memoize</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#memoize" title="Permalink to this definition">¶</a></dt>
<dd><p>Classic memoization decorator.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Utils</a></li>
<li><a class="reference internal" href="#decorators">Decorators</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plugins.html"
                        title="previous chapter">Plugins</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../examples.html"
                        title="next chapter">Examples</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/utils.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../examples.html" title="Examples"
             >next</a> |</li>
        <li class="right" >
          <a href="plugins.html" title="Plugins"
             >previous</a> |</li>
        <li><a href="../index.html">py4dlib 0.6.5 documentation</a> &raquo;</li>
          <li><a href="../api.html" >API docs</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, André Berg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>